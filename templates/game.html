{% extends "base.html" %}

{% block title %}Play Algebra Game{% endblock %}

{% block content %}
<div class="game-container">
    <!-- Problem Section -->
    <section class="problem-section">
        <div class="problem-display">
            <h2>Problem</h2>
            <div id="problem-text" class="problem-text">
                <!-- Problem will be dynamically inserted here -->
            </div>
        </div>

        <!-- Answer Section -->
        <div class="answer-section">
            <input type="text" id="answer-input" placeholder="Enter your answer..." autocomplete="off">
            <div class="button-group">
                <button id="submit-btn" class="primary-btn">Submit Answer</button>
                <button id="hint-btn" class="secondary-btn">Get Hint (<span id="hints-remaining">3</span> left)</button>
            </div>
        </div>
    </section>

    <!-- Feedback Section -->
    <section class="feedback-section hidden" id="feedback-panel">
        <div class="result-message" id="result-message">
            <!-- Result message will be displayed here -->
        </div>
        
        <div class="explanation-panel hidden" id="explanation-panel">
            <h3>Solution Explanation</h3>
            <div id="solution-steps">
                <!-- Solution steps will be inserted here -->
            </div>
            <div id="key-concepts">
                <!-- Key concepts will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Progress Section -->
    <section class="progress-section">
        <div class="progress-info">
            <p>Current Level: <span id="current-level">7th Grade</span></p>
            <p>Problems Solved: <span id="problems-solved">0</span></p>
            <p>Accuracy: <span id="accuracy">0%</span></p>
        </div>
    </section>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Initialize game state
        loadNewProblem();

        // Event listeners
        document.getElementById('submit-btn').addEventListener('click', submitAnswer);
        document.getElementById('hint-btn').addEventListener('click', getHint);
        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') submitAnswer();
        });
    });
</script>
{% endblock %}